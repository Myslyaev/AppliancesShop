@page "/basket/{Id:int}"
@*@page "/productsfortype/{Id:int}"*@
@using AppliancesShop.BLL.Models.OutputModels
@attribute [StreamRendering]
@rendermode InteractiveServer

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
@code
{
	
	[Parameter]
	public int Id { get; set; }
	
	public ProductOutputModel product  { get; set; }
	
	private List<ProductOutputModel> _products;

	private ProductClient _product;
	
	private List<ShopOutputModel> _shops;

	private ShopClient _shop;

	public Basket()
	{
		_product = new ProductClient();
		_shop = new ShopClient();
		
	}

	protected override void OnInitialized()
	{
		_products = _product.GetProductsByProductTypeId(Id);
		_shops = _shop.GetAllShops();
	}
}
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++



<PageTitle>Корзина</PageTitle>

<h2>Корзина</h2>
<table class="table">
	<thead>
	<tr>
		<th><h4>Торвар</h4></th>
		<th><h4>Цена</h4></th>
		<th><h4>Описание</h4></th>
		<th><h4>Выбрать шт.</h4></th>
	</tr>
	
	</thead>
	
	<tbody>	
			
		@foreach (var i in _products)
		{
			<tr>

				<ProductInBasket product=i></ProductInBasket>
				
			</tr>
		}
	</tbody>
</table>
====================================================================================================================================================================

<h2>Где можно забрать</h2>

<table class="table">
	<thead>
		<tr>
			<th><h4>Заберу из</h4></th>
			<th><h4>Магазин</h4></th>
			<th><h4>Адрес</h4></th>
			<th><h4>Кол. шт. в магазине</h4></th>
		</tr>
	</thead>
	<tbody>
		@foreach (var i in _shops)
		{
			<tr>
				<td>
					<div class="form-check">
						<input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
						<label class="form-check-label" for="exampleRadios1">
							Заберу из
						</label>
					</div>

				</td>
				<td>@i.Name</td>
			@*-- Т.к. в ссылке используется @ а она нужна для внутренних переменных, необходимо использовать двойную собаку
			     чтобы её заэкранировать, т.к. в ссылке после /maps/ пишем двойную собаку @@, а там где нам нужны данные
			     из нашей переменной, мы используем одинарную @i.Adress -->*@
				<td><a href="https://www.google.com/maps/@@59.9400863,30.3028374,11.03z?entry=ttu&q=@i.Adress">@i.Adress</a></td>
			
				<td> 12
					     
						     @*@foreach (var i in _products)
						     {
							     foreach (var a in i.Availability)
							     {
								     foreach (var b in i.Availability)
								     {
									     @b.Shop.Name;
								     }
							     }
						     }*@
					     
					    
				     </td>

			</tr>
		}
		
		</tbody>
</table>


<div class="d-flex flex-row-reverse">
	<form action="http://localhost:5182/request">
		<button type="submit">Заказать</button>
	</form>
</div>


